{
  "name": "Leger Script",
  "scopeName": "source.lgs",
  "fileTypes": [
    "lgs"
  ],
  "patterns": [
    { "include": "#comment" },
    { "include": "#template-view" },
    { "include": "#template-head" },
    { "include": "#template-style" },
    { "include": "#template-script" },
    { "include": "#template-lang" },
    { "include": "#template-template" },
    { "include": "#command-tag" },
    { "include": "#var-tag" },
    { "include": "#placeholders" }
  ],
  "repository": {
    "comment": {
      "patterns": [
        {
          "name": "comment.block.lgs",
          "begin": "\\/\\*",
          "end": "\\*\\/"
        }
      ]
    },

    "placeholders": {
      "patterns": [
        {
          "include": "#placeholder-dollar"
        },
        {
          "include": "#placeholder-slash"
        }
      ]
    },

    "placeholder-dollar": {
      "patterns": [
        {
          "name": "meta.placeholder.var.lgs",
          "begin": "(\\$\\$)([a-zA-Z_-][a-zA-Z0-9_-]*)",
          "beginCaptures": {
                "1": { "name": "keyword.lgs-identifier.lgs" },
                "2": { "name": "support.class.lgs" }
          },
          "end": ";",
          "patterns": [
            { "include": "#comment" },
            { "include": "#attribute" }
          ]
        }
      ]
    },

    "placeholder-slash": {
      "patterns": [
        {
          "name": "meta.placeholder.script.lgs",
          "begin": "(\\$\\/)([a-zA-Z_-][a-zA-Z0-9_-]*)",
          "beginCaptures": {
                "1": { "name": "keyword.lgs-identifier.lgs" },
                "2": { "name": "support.function.lgs" }
          },
          "end": ";",
          "patterns": [
            { "include": "#comment" },
            { "include": "#attribute" }
          ]
        }
      ]
    },
    "attribute": {
      "patterns": [
        {
          "name": "entity.other.attribute-name.lgs",
          "match": "\\b[a-zA-Z_:][a-zA-Z0-9:._-]*\\b"
        },
        {
          "name": "string.quoted.double.lgs",
          "begin": "\"",
          "end": "\"",
          "patterns": [
            { "include": "#placeholder-dollar" },
            { "include": "#placeholder-slash" }
          ]
        }
      ]
    },

    "template-view": {
      "name": "meta.tag.view.lgs",
      "begin": "<(view)\\s*>",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "end": "</\\1\\s*>",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "contentName": "text.html.basic",
      "patterns": [
        { "include": "#comment" },
        { "include": "#placeholders" },
        { "include": "text.html.basic" }
      ]
    },
    "template-head": {
      "name": "meta.tag.head.lgs",
      "begin": "<(head)\\s*>",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "end": "</\\1\\s*>",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "contentName": "text.html.basic",
      "patterns": [
        { "include": "#comment" },
        { "include": "#placeholders" },
        { "include": "text.html.basic" }
      ]
    },
    "template-style": {
      "name": "meta.tag.style.lgs",
      "begin": "<(style)\\s*>",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "end": "</\\1\\s*>",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "contentName": "source.css",
      "patterns": [
        { "include": "#comment" },
        { "include": "#placeholders" },
        { "include": "source.css" }
      ]
    },
    "template-script": {
      "name": "meta.tag.script.lgs",
      "begin": "<(script)\\s*>",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "end": "</\\1\\s*>",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "contentName": "source.js",
      "patterns": [
        { "include": "#comment" },
        { "include": "#placeholders" },
        { "include": "source.js" }
      ]
    },
    "template-lang": {
      "name": "meta.tag.lang.lgs",
      "begin": "<(lang)\\s*>",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "end": "</\\1\\s*>",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "patterns": [
        { "include": "#comment" },
        { "include": "#placeholders" },
        {
          "match": "[^<\\$]+",
          "name": "string.unquoted.lang.lgs"
        }
      ]
    },
    "template-template": {
      "name": "meta.tag.template.lgs",
      "begin": "<(template)\\s*>",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "end": "</\\1\\s*>",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.lgs" },
        "1": { "name": "entity.name.tag.template.lgs" }
      },
      "patterns": [
        { "include": "#comment" },
        { "include": "#placeholders" },
        {
          "match": "[^<\\$]+",
          "name": "string.unquoted.template.lgs"
        }
      ]
    },
    "command-tag": {
      "name": "meta.tag.command.lgs",
      "begin": "<(import|export|global)\\s*>",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.lgs" },
        "1": { "name": "keyword.control.command.lgs" }
      },
      "end": "</\\1\\s*>",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.lgs" },
        "1": { "name": "entity.name.tag.command.lgs" }
      },
      "patterns": [
        { "include": "#comment" },
        { "include": "#placeholders" },
        { "include": "#template-view" },
        { "include": "#template-head" },
        { "include": "#template-style" },
        { "include": "#template-script" },
        { "include": "#template-lang" },
        { "include": "#template-template" },
        { "include": "#var-tag" }
      ]
    },
    "var-tag": {
      "name": "meta.tag.var.lgs",
      "begin": "<(?!(?:import|export|global|view|style|script|head|lang|template)\\b)([A-Za-z][A-Za-z0-9_-]*)\\s*>",
      "beginCaptures": {
        "0": { "name": "punctuation.definition.tag.begin.lgs" },
        "1": { "name": "entity.name.tag.var.lgs" }
      },
      "end": "</\\1\\s*>",
      "endCaptures": {
        "0": { "name": "punctuation.definition.tag.end.lgs" },
        "1": { "name": "entity.name.tag.var.lgs" }
      },
      "patterns": [
        { "include": "#comment" },
        { "include": "#placeholders" },
        { "include": "#template-view" },
        { "include": "#template-head" },
        { "include": "#template-style" },
        { "include": "#template-script" },
        { "include": "#template-lang" },
        { "include": "#template-template" },
        { "include": "#command-tag" }
      ]
    }
  },
  "scope": "source.lgs"
}
